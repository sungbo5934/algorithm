package com.algorithm.run.programmers;

import java.util.*;

public class CarSell {


    public static int[] solution(int[] prices) {
        int[] answer = new int[prices.length];
        Map<Integer, Integer> priceMap = new TreeMap<Integer, Integer>(new Comparator<Integer>() {
			@Override
			public int compare(Integer o1, Integer o2) {
				return o2 - o1;
			}
		});
        
        answer[prices.length - 1] = 0;
        priceMap.put(prices[prices.length - 1], priceMap.getOrDefault(prices[prices.length - 1], 0) + 1);
        
        for(int i = prices.length - 2 ; i > -1 ; i--) {
        	priceMap.put(prices[i], priceMap.getOrDefault(prices[i], 0) + 1);
        	
        	if(prices[i] == prices[i+1]) {
        		answer[i] = answer[i+1];
        	}else if(prices[i] < prices[i+1]) {
        		answer[i] = answer[i+1] + 1;
        	}else {
        		int cnt = 0;
        		for(Integer key : priceMap.keySet()) {
        			if(key > prices[i]) {
        				cnt += priceMap.get(key);
        			}else {
        				break;
        			}
        		}
        		answer[i] = cnt;
        	}
        	
        }
        return answer;
    }
 
	public static void main(String[] args) {
		//int[] prices = {1,5,4,3,185,1,35,1,351,351,35,13,21,2,15,1,38,8,74531,35,13,1,21,21,21,54,3,84,3,1,2,15,13,87,5,5,321,2,1,21,51,9,5,4,3,185,1,35,1,351,351,35,13,21,2,15,1,38,8,74531,35,13,1,21,21,21,54,3,84,3,1,2,15,13,87,5,5,321,2,1,21,51,9,5,4,3,185,1,35,1,351,351,35,13,21,2,15,1,38,8,74531,35,13,1,21,21,21,54,3,84,3,1,2,15,13,87,5,5,321,2,1,21,51,9,5,4,3,185,1,35,1,351,351,35,13,21,2,15,1,38,8,74531,35,13,1,21,21,21,54,3,84,3,1,2,15,13,87,5,5,321,2,1,21,51,9,5,4,3,185,1,35,1,351,351,35,13,21,2,15,1,38,8,74531,35,13,1,21,21,21,54,3,84,3,1,2,15,13,87,5,5,321,2,1,21,51,9,5,4,3,185,1,35,1,351,351,35,13,21,2,15,1,38,8,74531,35,13,1,21,21,21,54,3,84,3,1,2,15,13,87,5,5,321,2,1,21,51,9,5,4,3,185,1,35,1,351,351,35,13,21,2,15,1,38,8,74531,35,13,1,21,21,21,54,3,84,3,1,2,15,13,87,5,5,321,2,1,21,51,9,5,4,3,185,1,35,1,351,351,35,13,21,2,15,1,38,8,74531,35,13,1,21,21,21,54,3,84,3,1,2,15,13,87,5,5,321,2,1,21,51,9,5,4,3,185,1,35,1,351,351,35,13,21,2,15,1,38,8,74531,35,13,1,21,21,21,54,3,84,3,1,2,15,13,87,5,5,321,2,1,21,51,9,5,4,3,185,1,35,1,351,351,35,13,21,2,15,1,38,8,74531,35,13,1,21,21,21,54,3,84,3,1,2,15,13,87,5,5,321,2,1,21,51,9,5,4,3,185,1,35,1,351,351,35,13,21,2,15,1,38,8,74531,35,13,1,21,21,21,54,3,84,3,1,2,15,13,87,5,5,321,2,1,21,51,9,5,4,3,185,1,35,1,351,351,35,13,21,2,15,1,38,8,74531,35,13,1,21,21,21,54,3,84,3,1,2,15,13,87,5,5,321,2,1,21,51,9,5,4,3,185,1,35,1,351,351,35,13,21,2,15,1,38,8,74531,35,13,1,21,21,21,54,3,84,3,1,2,15,13,87,5,5,321,2,1,21,51,9,5,4,3,185,1,35,1,351,351,35,13,21,2,15,1,38,8,74531,35,13,1,21,21,21,54,3,84,3,1,2,15,13,87,5,5,321,2,1,21,51,9,5,4,3,185,1,35,1,351,351,35,13,21,2,15,1,38,8,74531,35,13,1,21,21,21,54,3,84,3,1,2,15,13,87,5,5,321,2,1,21,51,9,5,4,3,185,1,35,1,351,351,35,13,21,2,15,1,38,8,74531,35,13,1,21,21,21,54,3,84,3,1,2,15,13,87,5,5,321,2,1,21,51,9};
		int[] prices = {5,2,1,5,9,1,5};
		System.out.println(Arrays.toString(solution(prices)));
	}

}
